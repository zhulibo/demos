<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="format-detection" content="telephone=no">
  <title>Document</title>
  <!-- 重置样式 -->
  <link rel="stylesheet" href="css/reset.css">
  <!-- 公共样式 -->
  <link rel="stylesheet" href="css/common.css">
  <!-- 主样式 -->
  <link rel="stylesheet" href="css/main.css">
  <!-- jq -->
  <script src="js/jquery-2.1.4.min.js"></script>
</head>

<body>
<ul class="video-ct">
</ul>
<script>

  // 获取url中参数
  var params = {} // 参数存放的对象
  var key, value;  // 键、值
  var str = location.href; // 整个url
  str = str.substr(str.indexOf("?") + 1); // 从?下标+1处截取到最后
  var arr = str.split("&"); // 以&分割参数

  for (var i = 0; i < arr.length; i++) {
    var num = arr[i].indexOf("=");
    if (num > 0) {
      key = arr[i].substring(0, num); // 从0到num
      value = arr[i].substr(num + 1); // 从num + 1到最后
      params[key] = value;
    }
  }

  // 获取视频
  $.ajax({
    type: "GET",
    dataType: "json",
    url: "http://app.mxjclub.com/shop/banner/selectvideo",
    data: {
      type: params.type
    },
    success: function (data) {
      console.log(data)
      var html = '';
      $.each(data.information.records, function (index, val) {
        html += '<li>\n' +
          '    <video src="' + val.url + '"></video>\n' +
          '    <div class="bg"></div>\n' +
          '  </li>'
      });
      $('.video-ct').html(html);

      // 播放视频
      $('.video-ct .bg').click(function () {
        var media = $(this).parent().find('video')[0];
        if (media.paused) {
          media.play();
          $(this).addClass('playing')
        } else {
          media.pause();
          $(this).removeClass('playing')
        }
      })

    }
  });


</script>
</body>

</html>
